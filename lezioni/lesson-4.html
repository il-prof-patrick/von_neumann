<div id="lesson-4-view" class="w-full max-w-5xl mx-auto animate-fade-in z-10">
			<!-- Intestazione -->
			<div class="mb-12 border-b border-white/10 pb-6 flex items-center justify-between">
				<div>
					<span class="text-neon-teal font-mono text-sm tracking-widest">LEZIONE 04</span>
					<h1 class="text-4xl md:text-5xl font-bold text-white mt-2">Il Microprocessore o CPU</h1>
					<p class="text-gray-400 mt-4 text-lg">Il cervello del computer.</p>
				</div>
				<div class="md:block text-neon-teal/20 animate-spin-slow">
					<i data-lucide="cpu" class="w-24 h-24"></i>
				</div>
			</div>
			<!-- Intro: Cervello, Transistor, Bit -->
			<section class="grid md:grid-cols-2 gap-12 mb-16 items-center">
				<div class="space-y-6">
					<div
						class="bg-gradient-to-r from-neon-teal/10 to-transparent p-6 rounded-xl border-l-4 border-neon-teal">
						<p class="text-xl text-white font-light italic text-justify">
							"La CPU (Central Processing Unit), chiamata anche microprocessore o chip, è considerata il
							<strong class="text-neon-teal">cervello</strong> del computer."
						</p>
					</div>
					<p class="text-gray-300 text-justify">
						È il componente che esegue le istruzioni e elabora i dati, permettendo al computer di
						funzionare.
					</p>
				</div>
				<!-- Spazio Foto CPU (Fronte/Retro) -->
				<div
					class="bg-dark-card rounded-2xl border border-neon-teal/30 p-6 flex flex-col items-center justify-center gap-4">
					<div class="flex flex-row gap-4 justify-center w-full">
						<!-- Fronte -->
						<div class="flex flex-col gap-2 items-center group">
							<div
								class="border border-neon-teal/50">
								<img src="https://m.media-amazon.com/images/I/61DzCZUwryL.jpg" alt="CPU Fronte"
									class="w-full h-full object-cover group-hover:scale-110 transition-transform">
							</div>
							<span class="text-xs text-gray-500 font-mono">FRONTE</span>
						</div>
						<!-- Retro -->
						<div class="flex flex-col gap-2 items-center group">
							<div
								class="border border-neon-teal/50">
								<img src="https://www.edn.com/wp-content/uploads/New_CPU_bottom.jpg" alt="CPU Retro"
									class="w-full h-full object-cover group-hover:scale-110 transition-transform">
							</div>
							<span class="text-xs text-gray-500 font-mono">RETRO</span>
						</div>
					</div>
				</div>
			</section>
			<!-- Sezione Transistor -->
			<section class="mb-16">
				<div>
					<h3 class="text-lg font-bold text-white mb-2 flex items-center gap-2"><i data-lucide="zap"
							class="text-yellow-400 w-5 h-5"></i> Come funziona</h3>
					<p class="text-gray-300 text-justify mb-8">
						La CPU è composta da miliardi di <strong>transistor</strong>, cioè microscopici interruttori
						elettronici con due possibili stati:
					</p>
				</div>
				<div class="grid md:grid-cols-2 gap-8">
					<!-- Visualizzazione Transistor Logico -->
					<div class="bg-dark-card p-6 rounded-xl border border-white/10 flex flex-col gap-4">
						<p class="text-xs text-gray-500 uppercase font-mono tracking-wider text-center">Schema Logico
						</p>
						<div class="flex justify-around items-end h-full pb-4 gap-4">
							<!-- OFF State -->
							<div class="flex flex-col items-center gap-2 group w-full">
								<div
									class="transition-all duration-300 group-hover:border-gray-500">
									<!-- Circuit Graphic OFF (Open Switch) -->
									<div class="flex items-center w-full justify-center px-4">
										<div class="h-1.5 w-10 bg-gray-600"></div>
										<div class="relative h-12 w-12 flex justify-center">
											<!-- Interruttore alzato -->
											<div
												class="absolute bottom-0 left-0 w-12 h-1.5 bg-gray-600 origin-left transform -rotate-45 transition-all">
											</div>
										</div>
										<div class="h-1.5 w-10 bg-gray-600"></div>
									</div>
									<span
										class="text-xs text-gray-500 mt-6 font-mono font-bold tracking-widest">APERTO</span>
								</div>
								<div class="text-center mt-2">
									<div class="font-bold text-gray-400 text-lg">OFF - Valore bit: 0</div>
									<span class="text-xs text-gray-600">Nessuna corrente</span>
								</div>
							</div>
							<!-- Vertical Divider -->
							<div class="w-px h-32 bg-white/10 self-center"></div>
							<!-- ON State -->
							<div class="flex flex-col items-center gap-2 group w-full">
								<div
									class="shadow-[0_0_25px_rgba(0,255,157,0.15)] transition-all duration-300 group-hover:border-neon-green/60">
									<!-- Circuit Graphic ON (Closed Switch) -->
									<div class="flex items-center w-full justify-center px-4 relative">
										<!-- Linea base -->
										<div class="h-1.5 w-full bg-gray-700 absolute"></div>
										<!-- Flusso Corrente -->
										<div
											class="h-1.5 w-full bg-neon-green shadow-[0_0_12px_rgba(0,255,157,0.8)] z-10 animate-pulse">
										</div>
										<!-- Particelle che scorrono -->
										<div class="absolute top-0 left-0 w-3 h-1.5 bg-white blur-[2px] z-20 animate-flow"
											style="animation-duration: 1.2s"></div>
									</div>
									<span
										class="text-xs text-neon-green mt-6 font-mono font-bold tracking-widest shadow-neon">CHIUSO</span>
								</div>
								<div class="text-center mt-2">
									<div class="font-bold text-white text-lg">ON - Valore bit: 1</div>
									<span class="text-xs text-neon-green">Passa corrente</span>
								</div>
							</div>
						</div>
					</div>
					<!-- Spazio Foto Transistor -->
					<div
						class="bg-dark-card rounded-2xl border border-neon-teal/30 p-6 flex flex-col items-center justify-center gap-4 h-full">
						<div class="flex flex-col gap-4 items-center group text-center">
							<div
								class="border-4 border-neon-teal/30 shadow-[0_0_30px_rgba(45,212,191,0.2)] group-hover:border-neon-teal/60 transition-all duration-500">
								<img src="https://www.azom.com/images/Article_Images/ImageForArticle_22916_16911443322394545.jpg"
									alt="Transistor"
									class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
							</div>
							<span class="text-xs text-gray-400 font-mono max-w-xs leading-relaxed">
								Un singolo transistor ingrandito. <br>In una CPU moderna ce ne sono miliardi, grandi
								pochi nanometri, 20.000 volte più piccoli di un capello!
							</span>
						</div>
					</div>
				</div>
				<!-- NUOVA SEZIONE VIDEO VERTICALE -->
				<div class="mt-12 flex flex-col items-center animate-fade-in">
					<div class="flex items-center gap-2 mb-6">
						<div class="w-2 h-2 rounded-full bg-neon-red animate-pulse"></div>
						<h3 class="text-lg font-bold text-white tracking-wide">VIDEO APPROFONDIMENTO</h3>
					</div>
					<!-- Container Video Stile Smartphone -->
					<div
						class="group hover:shadow-[0_0_50px_rgba(0,243,255,0.2)] transition-all duration-500">
						<!-- Video Player -->
						<video class="w-full h-full object-cover" controls playsinline>
							<source src="img/video_transistor.mp4" type="video/mp4">
							Il tuo browser non supporta il tag video.
						</video>
						<!-- Riflesso Schermo (overlay estetico) -->
						<div
							class="absolute top-0 left-0 w-full h-full bg-gradient-to-tr from-white/5 to-transparent pointer-events-none rounded-[2rem]">
						</div>
						<!-- Notch simulato -->
						<div class="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-gray-900 rounded-b-xl z-20">
						</div>
						<!-- Indicatore Home simulato -->
						<div
							class="absolute bottom-2 left-1/2 -translate-x-1/2 w-1/3 h-1 bg-white/20 rounded-full z-20 backdrop-blur-sm">
						</div>
					</div>

				</div>
			</section>
			<!-- Sezione: CU e ALU -->
			<section class="mb-16">
				<h2 class="text-2xl font-bold text-white mb-8">Le due unità principali della CPU</h2>
				<div class="grid md:grid-cols-2 gap-6">
					<!-- CU Card -->
					<div
						class="group hover:bg-white/5 transition-colors">
						<div
							class="absolute top-4 right-4 text-neon-orange/20 group-hover:text-neon-orange/40 transition-colors">
							<i data-lucide="activity" class="w-16 h-16"></i>
						</div>
						<h3 class="text-xl font-bold text-white mb-2">Contol Unit (CU)</h3>
						<p class="text-neon-orange text-xs font-mono mb-4">Unità di controllo</p>
						<ul class="space-y-3 text-gray-300 text-sm">
							<li class="flex items-start gap-2">
								<i data-lucide="check" class="w-4 h-4 text-neon-orange mt-1"></i>
								Dirige tutto il processo di elaborazione dei dati.
							</li>
							<li class="flex items-start gap-2">
								<i data-lucide="check" class="w-4 h-4 text-neon-orange mt-1"></i>
								Coordina le attività di input e output.
							</li>
							<li class="flex items-start gap-2">
								<i data-lucide="check" class="w-4 h-4 text-neon-orange mt-1"></i>
								Dice all’ALU cosa fare in ogni momento.
							</li>
						</ul>
					</div>
					<!-- ALU Card -->
					<div
						class="group hover:bg-white/5 transition-colors">
						<div
							class="absolute top-4 right-4 text-neon-pink/20 group-hover:text-neon-pink/40 transition-colors">
							<i data-lucide="calculator" class="w-16 h-16"></i>
						</div>
						<h3 class="text-xl font-bold text-white mb-2">Arithmetic Logic Unit (ALU)</h3>
						<p class="text-neon-pink text-xs font-mono mb-4">Unità aritmetico-logica</p>
						<ul class="space-y-3 text-gray-300 text-sm">
							<li class="flex items-start gap-2">
								<i data-lucide="plus-circle" class="w-4 h-4 text-neon-pink mt-1"></i>
								Esegue operazioni aritmetiche (somma, sottrazione…).
							</li>
							<li class="flex items-start gap-2">
								<i data-lucide="scale" class="w-4 h-4 text-neon-pink mt-1"></i>
								Esegue operazioni logiche (confronti come “maggiore di” e operatori logici come "AND").
							</li>
						</ul>
					</div>
				</div>
				<!-- Registri Info -->
				<div
					class="mt-8 bg-white/5 border border-white/10 rounded-xl p-6 flex flex-col md:flex-row gap-6 items-center">
					<div class="bg-gray-800 p-3 rounded-lg border border-gray-600">
						<i data-lucide="database" class="text-gray-300 w-8 h-8"></i>
					</div>
					<div>
						<h4 class="text-white font-bold mb-2">Le memorie della CPU</h4>
						<p class="text-gray-400 text-sm text-justify leading-relaxed">
							All’interno della CPU sono presenti i <strong>registri</strong>, piccole memorie molto
							veloci utilizzate per conservare temporaneamente dati e istruzioni durante l’elaborazione.
							La capacità dei registri determina la lunghezza della parola, cioè il numero di bit che il
							processore è in grado di trattare simultaneamente.
							<span class="text-neon-teal block mt-2">I PC moderni usano CPU a 64 bit.</span>
							<br>
							All'interno della CPU vi è inoltre <strong>la Cache</strong>, una memoria interna
							superveloce dove vengono conservati i dati e le istruzioni usati più di recente, per evitare
							il lento accesso alla RAM.
						</p>
					</div>
				</div>
			</section>
			<!-- Sezione: Ciclo Istruzione -->
			<section class="mb-16">
				<h2 class="text-2xl font-bold text-white mb-8 text-center">Il Ciclo di Istruzione</h2>
				<p class="text-gray-300 text-center mb-10 max-w-2xl mx-auto">
					Ogni elaborazione complessa del computer viene suddivisa in passaggi elementari, chiamati cicli di
					istruzione.
					La CPU li esegue ripetutamente seguendo quattro fasi principali:
				</p>
				<!-- Container del Ciclo -->
				<div class="relative max-w-4xl mx-auto h-auto md:h-[450px] p-4 flex items-center justify-center">
					<!-- SVG CONNECTION LAYER (Background) -->
					<!-- 
							COORDINATE RICALCOLATE PERFETTAMENTE:
							Area SVG: 800x450.
							Centri stimati delle Card (Box):
							- Fetch (Alto Sx):   X=200, Y=110
							- Decode (Alto Dx):  X=600, Y=110
							- Execute (Basso Dx): X=600, Y=340
							- Store (Basso Sx):  X=200, Y=340
							
							Dimensioni Box (approssimative per distanziamento frecce):
							- Larghezza mezza box: ~150px
							- Altezza mezza box: ~80px
							-->
					<svg class="md:block"
						viewBox="0 0 800 450" fill="none" xmlns="http://www.w3.org/2000/svg">
						<defs>
							<!-- Marker Punta Freccia Moderna -->
							<marker id="arrowhead-modern" markerWidth="12" markerHeight="12" refX="10" refY="6"
								orient="auto">
								<path d="M 0 0 L 12 6 L 0 12 L 3 6 Z" fill="#475569" />
							</marker>
							<!-- Marker Colorati -->
							<marker id="arrow-blue-modern" markerWidth="12" markerHeight="12" refX="10" refY="6"
								orient="auto">
								<path d="M 0 0 L 12 6 L 0 12 L 3 6 Z" fill="#3b82f6" />
							</marker>
							<marker id="arrow-yellow-modern" markerWidth="12" markerHeight="12" refX="10" refY="6"
								orient="auto">
								<path d="M 0 0 L 12 6 L 0 12 L 3 6 Z" fill="#eab308" />
							</marker>
							<marker id="arrow-red-modern" markerWidth="12" markerHeight="12" refX="10" refY="6"
								orient="auto">
								<path d="M 0 0 L 12 6 L 0 12 L 3 6 Z" fill="#ef4444" />
							</marker>
							<marker id="arrow-green-modern" markerWidth="12" markerHeight="12" refX="10" refY="6"
								orient="auto">
								<path d="M 0 0 L 12 6 L 0 12 L 3 6 Z" fill="#22c55e" />
							</marker>
							<!-- Filtro Glow -->
							<filter id="glow-line">
								<feGaussianBlur stdDeviation="2" result="coloredBlur" />
								<feMerge>
									<feMergeNode in="coloredBlur" />
									<feMergeNode in="SourceGraphic" />
								</feMerge>
							</filter>
						</defs>
						<!-- Percorsi Base (Grigio scuro) -->
						<!-- 1. FETCH -> DECODE (Orizzontale Alto) -->
						<!-- Da X=360 (bordo dx Fetch) a X=440 (bordo sx Decode) a Y=110 -->
						<line x1="360" y1="110" x2="440" y2="110" stroke="#334155" stroke-width="2"
							marker-end="url(#arrowhead-modern)" />
						<!-- 2. DECODE -> EXECUTE (Verticale Destra) -->
						<!-- Da Y=200 (bordo basso Decode) a Y=250 (bordo alto Execute) a X=600 -->
						<line x1="600" y1="200" x2="600" y2="250" stroke="#334155" stroke-width="2"
							marker-end="url(#arrowhead-modern)" />
						<!-- 3. EXECUTE -> STORE (Orizzontale Basso) -->
						<!-- Da X=440 (bordo sx Execute) a X=360 (bordo dx Store) a Y=340 -->
						<line x1="440" y1="340" x2="360" y2="340" stroke="#334155" stroke-width="2"
							marker-end="url(#arrowhead-modern)" />
						<!-- 4. STORE -> FETCH (Verticale Sinistra) -->
						<!-- Da Y=250 (bordo alto Store) a Y=200 (bordo basso Fetch) a X=200 -->
						<line x1="200" y1="250" x2="200" y2="200" stroke="#334155" stroke-width="2"
							marker-end="url(#arrowhead-modern)" />
						<!-- ANIMAZIONI (Linee colorate che scorrono) -->
						<!-- 1. Blue Stream (Fetch -> Decode) -->
						<line x1="360" y1="110" x2="440" y2="110" stroke="#3b82f6" stroke-width="3"
							stroke-dasharray="80 80" stroke-dashoffset="160" filter="url(#glow-line)"
							marker-end="url(#arrow-blue-modern)">
							<animate attributeName="stroke-dashoffset" from="160" to="0" dur="2s"
								repeatCount="indefinite" />
							<animate attributeName="opacity" values="0;1;0" dur="2s" repeatCount="indefinite" />
						</line>
						<!-- 2. Yellow Stream (Decode -> Execute) -->
						<line x1="600" y1="200" x2="600" y2="250" stroke="#eab308" stroke-width="3"
							stroke-dasharray="50 50" stroke-dashoffset="100" filter="url(#glow-line)"
							marker-end="url(#arrow-yellow-modern)">
							<animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" begin="0.5s"
								repeatCount="indefinite" />
							<animate attributeName="opacity" values="0;1;0" dur="2s" begin="0.5s"
								repeatCount="indefinite" />
						</line>
						<!-- 3. Red Stream (Execute -> Store) -->
						<line x1="440" y1="340" x2="360" y2="340" stroke="#ef4444" stroke-width="3"
							stroke-dasharray="80 80" stroke-dashoffset="160" filter="url(#glow-line)"
							marker-end="url(#arrow-red-modern)">
							<animate attributeName="stroke-dashoffset" from="160" to="0" dur="2s" begin="1s"
								repeatCount="indefinite" />
							<animate attributeName="opacity" values="0;1;0" dur="2s" begin="1s"
								repeatCount="indefinite" />
						</line>
						<!-- 4. Green Stream (Store -> Fetch) -->
						<line x1="200" y1="250" x2="200" y2="200" stroke="#22c55e" stroke-width="3"
							stroke-dasharray="50 50" stroke-dashoffset="100" filter="url(#glow-line)"
							marker-end="url(#arrow-green-modern)">
							<animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" begin="1.5s"
								repeatCount="indefinite" />
							<animate attributeName="opacity" values="0;1;0" dur="2s" begin="1.5s"
								repeatCount="indefinite" />
						</line>
					</svg>
					<!-- GRID LAYOUT -->
					<div class="grid grid-cols-1 md:grid-cols-2 gap-x-32 gap-y-16 w-full max-w-3xl relative z-10">
						<!-- 1. FETCH (Order 1) -->
						<div class="relative group">
							<!-- Label numerica flottante -->
							<div
								class="absolute -top-4 -left-4 w-10 h-10 bg-dark-bg border border-blue-500 rounded-lg flex items-center justify-center text-blue-400 font-mono font-bold shadow-[0_0_15px_rgba(59,130,246,0.5)] z-20 group-hover:scale-110 transition-transform">
								1</div>
							<!-- Card -->
							<div
								class="bg-dark-card/90 backdrop-blur-sm p-6 rounded-xl border border-blue-500/20 hover:border-blue-500 transition-all duration-300 shadow-lg hover:shadow-[0_0_30px_rgba(59,130,246,0.15)] h-full flex flex-col justify-center">
								<div class="flex items-center gap-3 mb-2">
									<i data-lucide="download" class="text-blue-400 w-5 h-5"></i>
									<h3 class="text-white font-bold tracking-wide">FETCH</h3>
								</div>
								<p class="text-gray-400 text-xs leading-relaxed">La CU prende dalla RAM l’istruzione
									successiva e i dati necessari e li porta nei registri della CPU.</p>
							</div>
						</div>
						<!-- 2. DECODE (Order 2) -->
						<div class="relative group">
							<div
								class="absolute -top-4 -right-4 md:-left-4 w-10 h-10 bg-dark-bg border border-yellow-500 rounded-lg flex items-center justify-center text-yellow-400 font-mono font-bold shadow-[0_0_15px_rgba(234,179,8,0.5)] z-20 group-hover:scale-110 transition-transform">
								2</div>
							<div
								class="bg-dark-card/90 backdrop-blur-sm p-6 rounded-xl border border-yellow-500/20 hover:border-yellow-500 transition-all duration-300 shadow-lg hover:shadow-[0_0_30px_rgba(234,179,8,0.15)] h-full flex flex-col justify-center text-right md:text-left">
								<div class="flex items-center justify-end md:justify-start gap-3 mb-2">
									<h3 class="text-white font-bold tracking-wide order-1 md:order-2">DECODE</h3>
									<i data-lucide="binary" class="text-yellow-400 w-5 h-5 order-2 md:order-1"></i>
								</div>
								<p class="text-gray-400 text-xs leading-relaxed">La CU interpreta l’istruzione e
									comunica all’ALU quale operazione eseguire.</p>
							</div>
						</div>
						<!-- 3. EXECUTE (Was Order 3 in code, but visually needed Bottom Right. Now placed 3rd in DOM, forced to Order 4 on Desktop) -->
						<div class="relative group md:order-4">
							<div
								class="absolute -bottom-4 -right-4 md:-left-4 w-10 h-10 bg-dark-bg border border-red-500 rounded-lg flex items-center justify-center text-red-400 font-mono font-bold shadow-[0_0_15px_rgba(239,68,68,0.5)] z-20 group-hover:scale-110 transition-transform">
								3</div>
							<div
								class="bg-dark-card/90 backdrop-blur-sm p-6 rounded-xl border border-red-500/20 hover:border-red-500 transition-all duration-300 shadow-lg hover:shadow-[0_0_30px_rgba(239,68,68,0.15)] h-full flex flex-col justify-center text-right md:text-left">
								<div class="flex items-center justify-end md:justify-start gap-3 mb-2">
									<h3 class="text-white font-bold tracking-wide order-1 md:order-2">EXECUTE</h3>
									<i data-lucide="zap" class="text-red-400 w-5 h-5 order-2 md:order-1"></i>
								</div>
								<p class="text-gray-400 text-xs leading-relaxed">L’ALU svolge l’operazione aritmetica o
									logica richiesta.</p>
							</div>
						</div>
						<!-- 4. STORE (Was Order 4 in code, but visually needed Bottom Left. Now placed 4th in DOM, forced to Order 3 on Desktop) -->
						<div class="relative group md:order-3">
							<div
								class="absolute -bottom-4 -left-4 w-10 h-10 bg-dark-bg border border-green-500 rounded-lg flex items-center justify-center text-green-400 font-mono font-bold shadow-[0_0_15px_rgba(34,197,94,0.5)] z-20 group-hover:scale-110 transition-transform">
								4</div>
							<div
								class="bg-dark-card/90 backdrop-blur-sm p-6 rounded-xl border border-green-500/20 hover:border-green-500 transition-all duration-300 shadow-lg hover:shadow-[0_0_30px_rgba(34,197,94,0.15)] h-full flex flex-col justify-center">
								<div class="flex items-center gap-3 mb-2">
									<i data-lucide="save" class="text-green-400 w-5 h-5"></i>
									<h3 class="text-white font-bold tracking-wide">STORE</h3>
								</div>
								<p class="text-gray-400 text-xs leading-relaxed">Il risultato dell’operazione viene
									scritto di nuovo nella RAM, pronto per essere usato da altre istruzioni.</p>
							</div>
						</div>
					</div>
					<!-- Freccia di ritorno Mobile (Solo Mobile) -->
					<div
						class="absolute left-4 top-1/2 w-1 h-full border-l-2 border-dashed border-gray-700 -z-10">
					</div>
				</div>
				<p class="text-gray-300 text-center mb-10 max-w-2xl mx-auto">
					Dopo lo store, la CPU passa automaticamente all’istruzione successiva e ripete il ciclo milioni o
					miliardi di volte al secondo.
				</p>
				<!-- ANIMAZIONE SCHEMATICA DEL CICLO DI FETCH -->
				<div class="pb-32"
					id="fetch-diagram">
					<!-- Token Dati che si muove (Instruction ADD) -->
					<div id="f-token-instr"
						class="border-2 border-neon-purple font-mono text-xs">
						+
					</div>
					<!-- Token Dati che si muove (DATA 3) -->
					<div id="f-token-data1"
						class="border-2 border-neon-green font-mono">
						3
					</div>
					<!-- Token Dati che si muove (DATA 5) -->
					<div id="f-token-data2"
						class="border-2 border-neon-green font-mono">
						5
					</div>
					<!-- Token Risultato (8) -->
					<div id="f-token-result"
						class="border-2 border-white font-mono animate-pulse">
						8
					</div>
					<!-- CPU CONTAINER (Left) -->
					<div
						class="relative w-full md:w-1/2 h-[400px] bg-dark-card rounded-2xl border-2 border-neon-teal/50 p-6 flex flex-col justify-between shadow-[0_0_20px_rgba(45,212,191,0.1)]">
						<div class="absolute -top-3 left-4 bg-gray-900 px-2 text-neon-teal font-mono font-bold">CPU
							(Processore)</div>
						<!-- CU -->
						<div id="f-cu"
							class="w-full h-24 bg-gray-800 rounded-xl border border-neon-orange/50 flex flex-col items-center justify-center transition-all duration-300">
							<span class="text-neon-orange font-bold text-xl">CONTROL UNIT</span>
						</div>
						<!-- REGISTRI -->
						<div id="f-reg"
							class="w-full h-24 bg-gray-800 rounded-xl border border-white/20 flex flex-col items-center justify-center transition-all duration-300">
							<span class="text-white font-bold text-xl">REGISTRI</span>
						</div>
						<!-- ALU -->
						<div id="f-alu"
							class="w-full h-24 bg-gray-800 rounded-xl border border-neon-pink/50 flex flex-col items-center justify-center transition-all duration-300 relative">
							<span class="text-neon-pink font-bold text-xl">ALU</span>
						</div>
					</div>
					<!-- BUS CONNECTION (Middle) -->
					<div class="md:flex flex-col h-[300px] justify-center items-center gap-8 w-16">
						<i data-lucide="move-right" class="w-12 h-12 text-gray-500"></i>
						<i data-lucide="move-left" class="w-12 h-12 text-gray-500"></i>
					</div>
					<!-- RAM CONTAINER (Right) -->
					<div id="f-ram"
						class="relative w-full md:w-1/3 h-[400px] bg-dark-card rounded-2xl border-2 border-purple-500/50 p-6 shadow-[0_0_20px_rgba(168,85,247,0.1)] flex flex-col items-center justify-center gap-2 transition-all duration-300">
						<div class="absolute -top-3 right-4 bg-gray-900 px-2 text-purple-500 font-mono font-bold">RAM
							(Memoria)</div>
						<!-- Memory Cells -->
						<div id="f-mem-data1"
							class="w-full h-10 bg-gray-800/50 border border-gray-700 rounded flex items-center justify-between px-4 text-gray-400 text-sm font-mono">
							<span class="text-xs">0x00</span> <span class="text-white">DATA: 3</span>
						</div>
						<div id="f-mem-data2"
							class="w-full h-10 bg-gray-800/50 border border-gray-700 rounded flex items-center justify-between px-4 text-gray-400 text-sm font-mono">
							<span class="text-xs">0x01</span> <span class="text-white">DATA: 5</span>
						</div>
						<div id="f-mem-instr"
							class="w-full h-10 bg-purple-900/30 border border-purple-500 rounded flex items-center justify-between px-4 text-purple-200 text-sm font-mono shadow-[0_0_10px_rgba(168,85,247,0.3)]">
							<span class="text-xs">0x02</span> <span>INSTR: +</span>
						</div>
						<!-- Cella vuota per il risultato -->
						<div id="f-ram-result"
							class="w-full h-10 bg-gray-800/50 border border-gray-700 rounded flex items-center justify-between px-4 text-gray-400 text-sm font-mono opacity-50 transition-all duration-500">
							<!-- Si riempirà con JS -->
						</div>
						<div class="w-full h-8 bg-gray-800/50 border border-gray-700 rounded mb-1 opacity-50"></div>
					</div>
					<!-- Controls -->
					<div class="absolute bottom-2 w-full flex justify-center items-center gap-4 z-50 px-4">
						<button onclick="prevFetchStep()"
							class="p-2 rounded-full bg-white/10 hover:bg-white/20 border border-white/20 transition-colors disabled:opacity-30 disabled:cursor-not-allowed flex-shrink-0"
							id="btn-f-prev">
							<i data-lucide="chevron-left" class="w-6 h-6 text-white"></i>
						</button>
						<div
							class="bg-black/90 px-6 py-3 rounded-full border border-neon-teal/30 backdrop-blur-md w-[90%] max-w-3xl h-auto flex items-center justify-center text-center">
							<span id="fetch-desc" class="font-mono text-neon-teal text-xs font-bold px-2">Start: Dati
								pronti in RAM</span>
						</div>
						<button onclick="nextFetchStep()"
							class="p-2 rounded-full bg-white/10 hover:bg-white/20 border border-white/20 transition-colors disabled:opacity-30 disabled:cursor-not-allowed flex-shrink-0"
							id="btn-f-next">
							<i data-lucide="chevron-right" class="w-6 h-6 text-white"></i>
						</button>
					</div>
				</div>
			</section>
			<section class="mb-16">
				<div
					class="flex flex-col md:flex-row items-center gap-12 group hover:border-neon-teal/30 transition-all">
					<div
						class="absolute top-1/2 right-10 -translate-y-1/2 p-4 opacity-5 pointer-events-none group-hover:opacity-10 transition-opacity">
						<i data-lucide="watch" class="w-64 h-64 md:w-96 md:h-96"></i>
					</div>
					<div class="flex-1 z-10 space-y-6">
						<h3 class="text-3xl font-bold text-white flex items-center gap-3"><i data-lucide="clock"
								class="text-neon-teal w-8 h-8"></i> Orologio di Sistema (Clock)</h3>
						<p class="text-gray-300 text-lg text-justify leading-relaxed"> Il clock di sistema (system
							clock) è un circuito elettronico che genera segnali periodici sotto forma di impulsi
							elettrici. Come il battito di un metronomo, ogni impulso scandisce il tempo, generando
							scandendo un ritmo regolare che scandisce ogni singola operazione interna. </p>
						<p class="text-gray-300 text-lg text-justify leading-relaxed"> In particolare, fa partire e
							scandisce le operazioni della CPU e permette di sincronizzare tutte le parti del computer
							(CPU, memoria, bus, periferiche). </p>
						<p class="text-gray-300 text-lg text-justify leading-relaxed"> Senza clock, il computer non
							avrebbe un tempo comune e svolgerebbe le proprie operazioni con tempistiche totalmente
							sfalsate. </p>
						<p class="text-gray-300 text-lg text-justify leading-relaxed">La velocità del clock si misura in
							<strong>Hertz (Hz)</strong>, ovvero cicli al secondo.
						</p>
						<div class="flex flex-wrap gap-4 mt-4 opacity-70">
							<div class="bg-black/50 p-3 rounded-lg border border-white/10 flex flex-col items-start">
								<span
									class="text-gray-500 text-[10px] font-mono uppercase tracking-wider">Definizione</span><span
									class="text-gray-300 font-mono text-sm">1 Hz = 1 ciclo/s</span>
							</div>
							<div class="bg-black/50 p-3 rounded-lg border border-white/10 flex flex-col items-start">
								<span
									class="text-gray-500 text-[10px] font-mono uppercase tracking-wider">Definizione</span><span
									class="text-gray-300 font-mono text-sm">1 GHz = 1 Miliardo/s</span>
							</div>
						</div>
						<span class="text-neon-teal block mt-2">Le CPU moderne hanno un clock tra i 2GHz e i
							5GHz.</span>
					</div>
					<div class="flex flex-col items-center gap-6 z-10">
						<div
							class="relative w-64 h-64 flex-shrink-0 flex items-end justify-center bg-white/5 rounded-full border border-white/5 shadow-inner backdrop-blur-sm p-8">
							<div
								class="absolute inset-0 rounded-full border-t border-r border-l border-transparent border-t-gray-600/30 rotate-45">
							</div>
							<div class="absolute bottom-10 w-4 h-4 bg-gray-400 rounded-full z-20 shadow-lg"></div>
							<div id="metronome-stick"
								class="w-1.5 h-40 bg-gray-600 rounded-full origin-bottom animate-metronome-manual relative z-10 flex flex-col justify-between items-center pb-2"
								style="animation-duration: 2s;">
								<div class="w-6 h-8 bg-neon-teal rounded shadow-[0_0_20px_rgba(45,212,191,0.6)] relative top-4 transition-all duration-300"
									id="metronome-weight">
									<div class="absolute inset-0 bg-white/30 rounded blur-[2px]"></div>
								</div>
							</div>
							<div class="absolute top-10 left-10 text-gray-600 font-mono text-xs animate-pulse">TIC</div>
							<div class="absolute top-10 right-10 text-gray-600 font-mono text-xs animate-pulse"
								style="animation-delay: 0.6s">TAC</div>
							<div id="clock-status-text"
								class="absolute bottom-4 text-neon-teal font-mono text-xs font-bold tracking-widest uppercase z-30">
								1 Hz (Didattico)</div>
						</div>
						<div class="flex gap-3 bg-black/40 p-2 rounded-xl border border-white/10 backdrop-blur-md">
							<button onclick="changeClockSpeed('slow', this)"
								class="clock-btn bg-neon-teal text-black font-bold px-4 py-2 rounded-lg text-xs font-mono transition-all hover:scale-105 border border-transparent shadow-[0_0_10px_rgba(45,212,191,0.3)]">1
								Hz</button>
							<button onclick="changeClockSpeed('medium', this)"
								class="clock-btn bg-transparent text-gray-400 hover:text-white hover:bg-white/10 px-4 py-2 rounded-lg text-xs font-mono transition-all border border-transparent">100
								MHz</button>
							<button onclick="changeClockSpeed('fast', this)"
								class="clock-btn bg-transparent text-gray-400 hover:text-white hover:bg-white/10 px-4 py-2 rounded-lg text-xs font-mono transition-all border border-transparent group">4
								GHz</button>
						</div>
					</div>
				</div>
			</section>
			<section class="bg-dark-card border border-white/5 rounded-2xl p-8 mb-16">
				<h2 class="text-2xl font-bold text-white mb-6">Microprocessori Multi-core</h2>
				<div class="flex flex-col md:flex-row gap-8 items-center">
					<div class="flex-1">
						<p class="text-gray-300 text-justify mb-4">
							Per aumentare la potenza di calcolo, i moderni microprocessori non si limitano più ad avere
							una sola unità di calcolo, ma integrano più core all’interno dello stesso chip.
							Ogni core può essere visto come una piccola CPU autonoma, con la propria unità di controllo
							e la propria ALU.
						</p>
						<ul class="space-y-2 text-sm text-gray-400 mb-6">
							<li>• <strong>Dual-core:</strong> 2 unità di calcolo</li>
							<li>• <strong>Quad-core:</strong> 4 unità di calcolo</li>
						</ul>
						<span class="text-neon-teal block mt-2">I PC moderni hanno anche da 8 fino a 32 core!</span>
					</div>
					<div class="flex-shrink-0 grid grid-cols-2 gap-2 p-4 bg-black rounded-xl border border-gray-700">
						<div
							class="w-20 h-20 bg-neon-teal/10 border border-neon-teal flex items-center justify-center rounded">
							<span class="text-neon-teal font-mono font-bold">CORE 1</span>
						</div>
						<div
							class="w-20 h-20 bg-neon-teal/10 border border-neon-teal flex items-center justify-center rounded">
							<span class="text-neon-teal font-mono font-bold">CORE 2</span>
						</div>
						<div
							class="w-20 h-20 bg-neon-teal/10 border border-neon-teal flex items-center justify-center rounded">
							<span class="text-neon-teal font-mono font-bold">CORE 3</span>
						</div>
						<div
							class="w-20 h-20 bg-neon-teal/10 border border-neon-teal flex items-center justify-center rounded">
							<span class="text-neon-teal font-mono font-bold">CORE 4</span>
						</div>
					</div>
				</div>
			</section>
			<!-- Sezione: Tipologie di Calcolo (NUOVA) -->
			<section class="mb-16">
				<h2 class="text-2xl font-bold text-white mb-8 border-l-4 border-white pl-4">Tipologie di calcolo</h2>
				<div class="grid md:grid-cols-3 gap-6">
					<!-- 1. Calcolo Sequenziale -->
					<div
						class="bg-dark-card p-6 rounded-xl border border-blue-500/30 hover:border-blue-500 transition-all group flex flex-col h-full hover:shadow-[0_0_20px_rgba(59,130,246,0.15)]">
						<div class="flex items-center gap-4 mb-4">
							<div
								class="w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
								<i data-lucide="arrow-right-circle" class="text-blue-400 w-6 h-6"></i>
							</div>
							<div>
								<h3 class="text-lg font-bold text-white leading-tight">Calcolo sequenziale</h3>
								<p class="text-blue-400 text-[10px] font-mono uppercase tracking-widest mt-1">Una
									istruzione alla volta</p>
							</div>
						</div>
						<div class="flex-grow">
							<p class="text-gray-300 text-sm mb-4 leading-relaxed text-justify">
								È il metodo tradizionale: la CPU esegue un'istruzione dopo l'altra in ordine rigoroso.
								<br>
								Se un programma si blocca o richiede un'operazione lunga, tutto il sistema deve
								aspettare.
							</p>
						</div>
					</div>
					<!-- 2. Multitasking -->
					<div
						class="bg-dark-card p-6 rounded-xl border border-neon-purple/30 hover:border-neon-purple transition-all group flex flex-col h-full hover:shadow-[0_0_20px_rgba(188,19,254,0.15)]">
						<div class="flex items-center gap-4 mb-4">
							<div
								class="w-12 h-12 bg-neon-purple/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
								<i data-lucide="layers" class="text-neon-purple w-6 h-6"></i>
							</div>
							<div>
								<h3 class="text-lg font-bold text-white leading-tight">Multitasking</h3>
								<p class="text-neon-purple text-[10px] font-mono uppercase tracking-widest mt-1">
									Simulazione di simultaneità</p>
							</div>
						</div>
						<div class="flex-grow">
							<p class="text-gray-300 text-sm mb-4 leading-relaxed text-justify">
								Permette di eseguire più programmi "contemporaneamente". In realtà, se il core è uno
								solo, la CPU passa velocemente da un programma all'altro (Context Switching) creando
								l'illusione della simultaneità.
							</p>
						</div>
					</div>
					<!-- 3. Calcolo Parallelo -->
					<div
						class="bg-dark-card p-6 rounded-xl border border-neon-teal/30 hover:border-neon-teal transition-all group flex flex-col h-full hover:shadow-[0_0_20px_rgba(45,212,191,0.15)]">
						<div class="flex items-center gap-4 mb-4">
							<div
								class="w-12 h-12 bg-neon-teal/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
								<i data-lucide="cpu" class="text-neon-teal w-6 h-6"></i>
							</div>
							<div>
								<h3 class="text-lg font-bold text-white leading-tight">Calcolo Parallelo</h3>
								<p class="text-neon-teal text-[10px] font-mono uppercase tracking-widest mt-1">
									Simultaneità reale</p>
							</div>
						</div>
						<div class="flex-grow">
							<p class="text-gray-300 text-sm mb-4 leading-relaxed text-justify">
								Sfruttando processori Multi-core, il computer può eseguire istruzioni diverse nello
								stesso identico istante su core diversi. È una vera esecuzione simultanea che raddoppia
								o quadruplica la velocità.
							</p>
						</div>
					</div>
				</div>
				<!-- SIMULATORE INTERATTIVO (NUOVO) -->
				<div class="relative">
					<div
						class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-neon-blue via-neon-purple to-neon-teal">
					</div>
					<div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
						<h3 class="text-xl font-bold text-white flex items-center gap-2">
							<i data-lucide="play-circle" class="text-neon-green"></i> Simulatore Processi
						</h3>
						<!-- Controlli -->
						<div class="flex bg-black/40 p-1 rounded-lg border border-white/10">
							<button onclick="setSimMode('sequential')" id="btn-seq"
								class="px-4 py-2 rounded-md text-xs font-mono font-bold transition-all text-gray-400 hover:text-white">SEQUENZIALE</button>
							<button onclick="setSimMode('multitasking')" id="btn-multi"
								class="px-4 py-2 rounded-md text-xs font-mono font-bold transition-all text-gray-400 hover:text-white">MULTITASKING</button>
							<button onclick="setSimMode('parallel')" id="btn-para"
								class="px-4 py-2 rounded-md text-xs font-mono font-bold transition-all text-gray-400 hover:text-white">PARALLELO</button>
						</div>
					</div>
					<!-- Spiegazione Dinamica (SPOSTATA SOPRA) -->
					<div
						class="mb-6 p-4 bg-white/5 rounded-lg border border-white/10 min-h-[60px] flex items-center justify-center">
						<p id="sim-description" class="text-sm text-gray-300 font-mono leading-relaxed text-center">
							Seleziona una modalità per iniziare la simulazione.
						</p>
					</div>
					<!-- Area Visualizzazione -->
					<div class="grid grid-cols-1 md:grid-cols-4 gap-4 min-h-[300px]">
						<!-- Colonna 1: Coda Processi -->
						<div class="md:col-span-1 bg-black/20 rounded-xl p-4 border border-white/5 flex flex-col">
							<h4 class="text-gray-400 text-xs font-mono uppercase mb-4 text-center">Coda (Queue)</h4>
							<div id="sim-queue"
								class="flex-grow flex flex-col-reverse justify-start gap-2 p-2 min-h-[200px] border-2 border-dashed border-gray-700/50 rounded-lg">
								<!-- I task appariranno qui -->
							</div>
						</div>
						<!-- Colonna 2 & 3: CPU Cores -->
						<div
							class="md:col-span-2 bg-gray-900/50 rounded-xl p-6 border border-white/10 relative flex flex-col justify-center items-center gap-6">
							<h4 class="absolute top-4 left-4 text-gray-400 text-xs font-mono uppercase">CPU Unit</h4>
							<!-- Core 1 -->
							<div class="w-full flex items-center gap-4">
								<div class="w-16 text-right text-xs font-mono text-neon-teal font-bold">CORE 1</div>
								<div id="sim-core-1"
									class="shadow-inner transition-all">
									<!-- Placeholder per task attivo -->
									<div class="absolute bottom-0 left-0 h-1 bg-neon-teal transition-all duration-75 w-0"
										id="progress-core-1"></div>
									<span class="text-gray-600 text-xs font-mono">IDLE</span>
								</div>
							</div>
							<!-- Core 2 (Visibile solo in Parallelo) -->
							<div id="core-2-container"
								class="w-full flex items-center gap-4 opacity-30 blur-[2px] transition-all duration-500">
								<div class="w-16 text-right text-xs font-mono text-neon-purple font-bold">CORE 2</div>
								<div id="sim-core-2"
									class="shadow-inner">
									<div class="absolute bottom-0 left-0 h-1 bg-neon-purple transition-all duration-75 w-0"
										id="progress-core-2"></div>
									<span class="text-gray-600 text-xs font-mono">OFFLINE</span>
								</div>
							</div>
						</div>
						<!-- Colonna 4: Completati -->
						<div class="md:col-span-1 bg-black/20 rounded-xl p-4 border border-white/5 flex flex-col">
							<h4 class="text-gray-400 text-xs font-mono uppercase mb-4 text-center">Finiti</h4>
							<div id="sim-finished"
								class="flex-grow flex flex-col justify-start gap-2 p-2 min-h-[200px] border-2 border-dashed border-gray-700/50 rounded-lg">
								<!-- Task finiti -->
							</div>
						</div>
					</div>
				</div>
			</section>
			<div class="flex justify-between mt-12 pt-8 border-t border-white/10">
				<!-- AGGIORNATO: Punta alla Lezione 3 -->
				<button onclick="navigateTo('lesson-3')"
					class="flex items-center gap-2 text-gray-400 hover:text-white transition-colors">
					<i data-lucide="arrow-left"></i> Precedente: Scheda madre
				</button>
				<!-- AGGIORNATO: Punta alla Lezione 5 -->
				<button onclick="navigateTo('lesson-5')"
					class="flex items-center gap-2 text-neon-pink hover:text-white font-bold transition-colors">
					Prossima: La GPU <i data-lucide="arrow-right"></i>
				</button>
			</div>
		</div>
